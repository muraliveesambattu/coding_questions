<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        function searchRotatedArray(nums, key) {
            let left = 0;
            let right = nums.length - 1;

            while (left <= right) {
                const mid = Math.floor((left + right) / 2);

                if (nums[mid] === key) {
                    return mid; // Key found
                }

                // Check if the left half is sorted
                if (nums[left] <= nums[mid]) {
                    if (key >= nums[left] && key < nums[mid]) {
                        // Key is in the sorted left half
                        right = mid - 1;
                    } else {
                        // Key is in the right half
                        left = mid + 1;
                    }
                } else {
                    // Right half is sorted
                    if (key > nums[mid] && key <= nums[right]) {
                        // Key is in the sorted right half
                        left = mid + 1;
                    } else {
                        // Key is in the left half
                        right = mid - 1;
                    }
                }
            }

            return -1; // Key not found
        }

        // Example usage:
        const nums = [10, 15, 1, 3, 8];
        const key = 15;
        console.log(searchRotatedArray(nums, key)); // Output: 1

        const nums2 = [4, 5, 6, 7, 0, 1, 2];
        const key2 = 0;
        console.log(searchRotatedArray(nums2, key2)); // Output: 4

        const nums3 = [4, 5, 6, 7, 0, 1, 2];
        const key3 = 3;
        console.log(searchRotatedArray(nums3, key3)); // Output: -1

    </script>
</body>

</html>